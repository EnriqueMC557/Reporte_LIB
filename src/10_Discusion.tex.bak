%%DISCUSIÓN

El trabajo realizado en este proyecto se espera sea tomado en cuenta para generar mejores técnicas para rehabilitación de pacientes. Este proyecto plantea las bases para realizar una adecuada implementación de una aplicación en lazo cerrado que sea de utilidad para la rehabilitación de pacientes, y los elementos que se considera que se pueden optimizar se mencionan a continuación.
\hfill \break

\textbf{Adquisición y decodificación de datos}
\hfill \break

El subsistema diseñado para realizar la adquisición y decodificación de datos tiene la particularidad de que puede ser utilizado para cualquier dispositivo de adquisición que utilice un chip ADS1299, sólo son necesarios pequeños cambios en la selección de los bytes correspondientes a cada canal. Un problema que tiene este subsistema se encuentra en el bloque responsable de realizar la solicitud de muestras al dispositivo de adquisición, ya que es un bloque perteneciente al \emph{Instrument Control Toolbox} de Simulink, por lo cual si no se cuenta con dicho toolbox el sistema no será funcional. Una posible mejora a este subsistema sería el diseño de un bloque responsable de la solicitud de muestras implementado en algún lenguaje de bajo nivel, esto podría hacer al sistema flexible y veloz, ya que actualmente el bloque de solicitud realiza una comunicación con MATLAB para poder establecer una conexión serial con el dispositivo de adquisición, proceso que puede estar generando algún retraso dentro de todo el sistema
\hfill \break

\textbf{Protocolo para registro de sEMG}
\hfill \break

El protocolo descrito en este proyecto se presta a errores humanos al momento de ubicar el lugar adecuado para la colocación de electrodos, por lo cual no se garantiza una repetibilidad del 100$\%$ en los registros. Se propone realizar un estudio donde se analice la actividad mioeléctrica en distintas posiciones del brazo en diversos sujetos, buscando obtener una estandarización en el posicionamiento de electrodos para aplicaciones similares a la desarrollada en este proyecto.
\hfill \break

\textbf{Procesamiento de sEMG}
\hfill \break

Actualmente todo el procesamiento de las señales de sEMG se lleva a cabo por ventanas no traslapadas de adquisición, este proceso genera un retardo natural definido por la longitud de la ventana analizada, por lo cual el realizar un procesamiento con ventanas traslapadas o bien muestra a muestra podría diminuir este retardo natural. La implementación de un filtro de mediana móvil resultó de gran utilidad para conseguir una envolvente suave que sirviera como señal de control, sin embargo existen métodos como la regla trapezoidal que podrían arrojar resultados similares y de forma más eficaz. Un aspecto importante en el procesamiento es el hecho de que no se trabajó con señales de sEMG normalizadas, esto podría estar afectando al desempeño del sistema y sería una buena idea implementar una aplicación similiar evaluando el desempeño utilizando sEMG normalizado y no normalizado.
\hfill \break

\textbf{Esquema de control}
\hfill \break

Actualmente el esquema de control se divide en dos grandes partes: 1)Máquina de estados finitos para la identificación de movimientos; 2)Ecuación lineal para realizar el mapeo sEMG-FES.

En cuanto a la identificación de movimientos se considera que la implementación de un clasificador basado en una FSM que cambia de estado según se superen determinados valores de umbrales no es la mejor forma para realizar una clasificación, pero quizás sí una de las más fáciles. Este clasificador demostró ciertos problemas en identificar cambios de estado visualmente notorios, por ejemplo, en los movimientos ligeros de apertura o cierre existían momentos en los cuales el clasificador no identificaba el movimiento de forma adecuada a pesar de que visualmente se notara un cambio en la envolvente. Otro aspecto importante de este clasificador implementado es la imposibilidad de compensar la fatiga muscular. Implementar un clasificador robusto basado en algún algoritmo de inteligencia artificial o LDA podría ser de mayor utilidad para una aplicación que se fuera a utilizar como técnica de rehabilitación. Otro aspecto importante relacionado a la clasificación es que los umbrales pueden estar generando un retardo en el tiempo de respuesta de estimulación, ya que habrá movimientos ligeros que no logren activar la estimulación; una buena idea sería probar disminuir los umbrales para lograr la activación de la estimulación con movimientos ligeros.

En cuanto a la ecuación lineal para realizar el mapeo, esta se está obteniendo a partir de dos puntos de calibración, y considerando que el sEMG no presenta un comportamiento lineal, es muy probable que este método no pueda realizar un seguimiento preciso a los cambios de sEMG. Una mejora a esta parte sería utilizar una calibración a más de dos puntos y obtener una regresión lineal con ellos.
\hfill \break

Cabe destacar que al final del desarrollo de este proyecto se tuvo la posibilidad de probar la utilidad del sistema dentro de una situación de la vida real. Esta prueba se realizó a un sujeto sano, al cual se le otorgó la tarea de tomar un objeto cilíndrico con su mano derecha pero utilizando solamente la corriente eléctrica modulada por su brazo izquierdo. El sujeto pudo tomar el 

%Se ha demostrado que el sistema implementado en Simulink para realizar la adquisición y decodificación funciona adecuadamente, y gracias a la métrica de correlación obtenida se puede fundamentar su buen funcionamiento.
%
%El protocolo de registro, a pesar de no ser selectivo en su totalidad, permite distinguir en la mayoría de los casos entre actividad sEMG relacionada a un movimiento u otro. Sin embargo, se ha observado que se deben de dar indicaciones claras al sujeto experimental, ya que se a observado que al realizar contracciones fuertes en cualquier movimiento, la actividad de sEMG en ambos canales es muy similar.
%
%El esquema de filtrado diseñado para los registros de sEMG es útil ya que permite obtener una señal de sEMG en la que se pueden distinguir las contracciones de los momentos de reposo. En cuanto a los descriptores de amplitud se optará por utilizar el valor RMS debido a que proporciona valores más grandes que el valor ARV/MAV. Cabe destacar que se ha observado que, en cuanto a morfología de las señales obtenidas tras aplicar el descriptor, se obtiene una forma muy similar para ambos descriptores. Un punto importante relacionado al procesamiento es el método de suavizado; este genera una onda suave que permite obtener un mapeo con mejor estabilidad que sin suavizar, sin embargo, este procedimiento de suavizado utiliza un buffer de 10 muestras de valor RMS, recordemos que cada muestra de RMS se obtiene a partir del procesamiento de ventanas de 0.1 segundos de sEMG, lo cuál implica que se está generando un retraso total de 1 segundo en la actualización del parámetro a mapear, lo cual nos coloca en el límite del tiempo prometido; para solucionar esto se probaran ventanas más cortas.
%
%El mapeo lineal es útil hasta cierto punto, pero si se opta por utilizar dicho mapeo es muy probable que sea necesario utilizar una lógica de control adicional que ayude a obtener un mapeo más estable. Adicional a esto aún está como alternativa a probar el obtener una relación entre los descriptores y la amplitud de la corriente de estimulación a través de una calibración a 5 posturas de la mano (cierre total de la mano, cierre parcial, descanso, apertura parcial de mano y apertura total).
%
%Hay que destacar que todo el trabajo realizado se ha probado de forma exitosa con el dispositivo OpenBCI debido a que el prototipo presenta problemas en el circuito encargado de la conversión analógico-digital. Afortunadamente todo lo desarrollado tiene la posibilidad de migrarse al dispositivo de forma sencilla, por lo cual en cuanto se solucionen los problemas con el prototipo se migrará todo a este.